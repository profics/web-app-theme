<%
  current_model = model_name.constantize
  columns.each do |column|
%>
  <div class="group">
    <%%= f.label :<%= column.name %>, t("activerecord.attributes.<%= model_name.underscore %>.<%= column.name %>", :default => "<%= column.name.humanize %>").sub(/_id$/, ''), :class => :label %>
    <%-
      column_name = column.name.sub(/_id$/, '')
      reflection = current_model.reflect_on_association(column_name.to_sym)
      if reflection && !reflection.options[:polymorphic]
    -%>
        <%%= f.select :<%= column.name %>, <%= reflection.klass.name %>.all.map{ |e| [e, e.id] }, :include_blank => true, :class => 'select' %>
    <%-
      else
    -%>
        <%%= f.<%= column.field_type %> :<%= column.name %>, :class => '<%= column.field_type %>' %>
    <%-
      end
    -%>
    <span class="description">Ex: a simple text</span>
  </div>
<%- end -%>
<div class="group navform wat-cf">
  <button class="button" type="submit">
    <%%= content_tag(:span, "#{t("web-app-theme.save", :default=> "Save")}", :class => 'button_image link_save') + content_tag(:span, "#{t("web-app-theme.delete", :default=> "Delete")}", :class => 'button_text') %>
  </button>
  <span class="text_button_padding"><%%= t("web-app-theme.or", :default => "or") %></span>
  <%%= link_to content_tag(:span, "#{t("web-app-theme.cancel", :default=> "Cancel")}", :class => 'button_image link_cancel') + content_tag(:span, "#{t("web-app-theme.cancel", :default=> "Cancel")}", :class => 'button_text'), <%= controller_routing_path %>_path, :class => "button" %>
</div>
